<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Tomasz Niedźwiecki</title>
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
    <meta name="description" content="Inwestuję w ludzi i buduję z nimi biznesy.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: #000;
            color: #ededed;
        }

        ::selection {
            background: #fff;
            color: #000;
        }

        /* ==================== FULLPAGE SCROLL ==================== */
        .fullpage-container {
            height: 100vh;
            height: 100dvh; /* iOS Safari fix - dynamic viewport height */
            overflow-y: auto;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }
        .fullpage-container.is-scrolling {
            scroll-snap-type: none;
        }
        .fullpage-section {
            min-height: 100vh;
            min-height: 100dvh; /* iOS Safari fix */
            height: auto;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            position: relative;
            display: flex;
            flex-direction: column;
            background: #000; /* Prevent content bleed-through */
            overflow: hidden; /* Contain content within section */
        }
        @supports (height: 100dvh) {
            .fullpage-section {
                height: 100dvh;
            }
        }
        /* Mobile: Onepage scroll with snap */
        @media (max-width: 767px) {
            .fullpage-container {
                /* Scroll snap with webkit prefix for older iOS */
                -webkit-scroll-snap-type: y mandatory;
                scroll-snap-type: y mandatory;
                /* Height fallback: vh -> dvh */
                height: 100vh;
                height: 100dvh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                /* Prevent iOS overscroll bounce */
                overscroll-behavior: none;
            }
            .fullpage-container.is-scrolling {
                -webkit-scroll-snap-type: none;
                scroll-snap-type: none;
            }
            .fullpage-section {
                /* Height fallback: vh -> dvh */
                min-height: 100vh;
                min-height: 100dvh;
                height: 100vh;
                height: 100dvh;
                -webkit-scroll-snap-align: start;
                scroll-snap-align: start;
                scroll-snap-stop: always;
                padding: 0;
                /* iOS safe areas */
                padding-left: env(safe-area-inset-left, 0);
                padding-right: env(safe-area-inset-right, 0);
                display: flex;
                flex-direction: column;
            }
            .fullpage-section .content-area {
                display: flex;
                align-items: center;
                justify-content: center;
                flex: 1;
                /* Safe area for bottom (home indicator) */
                padding-bottom: env(safe-area-inset-bottom, 0);
            }
            .fullpage-section .content-area > .section-content {
                width: 100%;
                max-width: 100%;
                display: flex;
                flex-direction: column;
            }
        }

        /* Builder panel - DESKTOP ONLY */
        #builder-panel {
            display: none;
        }
        @media (min-width: 768px) {
            #builder-panel {
                display: block;
                position: fixed;
                top: 0;
                right: 0;
                width: 42%;
                height: 100vh;
                height: 100dvh;
                z-index: 1;
            }
            #builder-canvas {
                width: 100%;
                height: 100%;
                cursor: pointer;
            }
            .builder-overlay {
                position: absolute;
                inset: 0;
                background:
                    linear-gradient(to right,
                        rgba(0,0,0,1) 0%,
                        rgba(0,0,0,0.85) 10%,
                        rgba(0,0,0,0.4) 25%,
                        rgba(0,0,0,0.1) 45%,
                        transparent 60%),
                    radial-gradient(ellipse at 70% 50%,
                        transparent 40%,
                        rgba(0,0,0,0.3) 100%);
                pointer-events: none;
            }
        }
        @media (min-width: 1600px) {
            #builder-panel {
                width: 40%;
            }
        }

        /* Content area */
        .content-area {
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            min-height: 100%;
            padding: 0 1.5rem;
            flex: 1;
        }
        .content-area > .section-content {
            width: 100%;
            max-width: 420px;
        }

        /* Desktop: Content on left, Tetris on right */
        /* Small screens: less padding to fit content */
        /* Large screens: more padding for aesthetics */
        @media (min-width: 768px) {
            .content-area {
                width: 100%;
                max-width: 100%;
                padding: 0;
                padding-left: 1.5rem;
                justify-content: flex-start;
            }
            .content-area > .section-content {
                max-width: min(520px, calc(50vw - 3rem));
            }
        }
        @media (min-width: 1200px) {
            .content-area {
                padding-left: 2.5rem;
            }
            .content-area > .section-content {
                max-width: min(580px, calc(52vw - 4rem));
            }
        }
        @media (min-width: 1600px) {
            .content-area {
                padding-left: 5rem;
            }
            .content-area > .section-content {
                max-width: 620px;
            }
        }
        @media (min-width: 2000px) {
            .content-area {
                padding-left: 8rem;
            }
            .content-area > .section-content {
                max-width: 680px;
            }
        }

        /* Hero h1 - scales with viewport */
        @media (min-width: 768px) {
            .fullpage-section[data-section="0"] h1 {
                font-size: clamp(28px, 4vw, 42px) !important;
            }
        }
        @media (min-width: 1200px) {
            .fullpage-section[data-section="0"] h1 {
                font-size: clamp(32px, 3.5vw, 48px) !important;
            }
        }
        @media (min-width: 1600px) {
            .fullpage-section[data-section="0"] h1 {
                font-size: clamp(38px, 3vw, 56px) !important;
            }
        }

        /* Dots navigation - positioned based on screen size */
        .dots-nav {
            position: fixed;
            left: 52%;
            top: 50%;
            transform: translateY(-50%);
            z-index: 40;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }
        @media (min-width: 1200px) {
            .dots-nav {
                left: 55%;
            }
        }
        @media (min-width: 1600px) {
            .dots-nav {
                left: 57%;
            }
        }
        @media (min-width: 2000px) {
            .dots-nav {
                left: 58%;
            }
        }
        @media (max-width: 767px) {
            .dots-nav {
                display: none;
            }
        }
        .dots-nav button {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: rgba(255,255,255,0.25);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        .dots-nav button:hover {
            background: rgba(255,255,255,0.4);
        }
        .dots-nav button.active {
            background: #fff;
        }
        .dots-nav button::after {
            content: attr(data-label);
            position: absolute;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            white-space: nowrap;
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }
        .dots-nav button:hover::after {
            opacity: 1;
        }

        /* Section content animation */
        .section-content {
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .section-content.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ==================== EXISTING STYLES ==================== */
        .gradient-text {
            background: linear-gradient(to bottom, #fff 20%, #71717a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-primary {
            background: linear-gradient(to bottom, #fff, #d4d4d8);
            box-shadow:
                0 1px 2px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.5),
                0 0 0 1px rgba(0,0,0,0.1);
        }
        .btn-primary:hover {
            background: linear-gradient(to bottom, #f4f4f5, #d4d4d8);
        }

        /* Track record section styles */
        .track-section {
            position: relative;
        }
        .track-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse 50% 80% at 10% 50%, var(--accent-glow, rgba(99,102,241,0.08)) 0%, transparent 70%);
            pointer-events: none;
        }
        .track-icon {
            width: 100px;
            height: 100px;
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2.5rem;
        }

        /* ==================== OFFER CARDS ==================== */
        .offer-cards {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .offer-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        .offer-card:hover {
            background: rgba(255,255,255,0.04);
            border-color: rgba(255,255,255,0.1);
            transform: translateX(4px);
        }
        .offer-card__icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            position: relative;
        }
        .offer-card__icon i {
            font-size: 26px;
            position: relative;
            z-index: 1;
        }
        .offer-card__icon::after {
            content: '';
            position: absolute;
            inset: -16px;
            border-radius: 24px;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }
        .offer-card:hover .offer-card__icon::after {
            opacity: 1;
        }
        .offer-card__content h3 {
            font-size: 17px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 4px;
        }
        .offer-card__content p {
            font-size: 14px;
            color: #71717a;
            line-height: 1.5;
        }
        /* Emerald variant */
        .offer-card--emerald .offer-card__icon {
            background: rgba(16, 185, 129, 0.25);
            border: 1px solid rgba(16, 185, 129, 0.5);
            box-shadow:
                0 0 15px rgba(16, 185, 129, 0.4),
                0 0 30px rgba(16, 185, 129, 0.3),
                0 0 45px rgba(16, 185, 129, 0.2);
        }
        .offer-card--emerald .offer-card__icon i {
            color: #34d399;
            filter: drop-shadow(0 0 8px rgba(16, 185, 129, 0.6));
        }
        .offer-card--emerald .offer-card__icon::after {
            background: radial-gradient(circle, rgba(16, 185, 129, 0.6) 0%, transparent 60%);
        }
        .offer-card--emerald:hover {
            border-color: rgba(16, 185, 129, 0.4);
        }
        /* Amber variant */
        .offer-card--amber .offer-card__icon {
            background: rgba(255, 180, 0, 0.25);
            border: 1px solid rgba(255, 180, 0, 0.5);
            box-shadow:
                0 0 15px rgba(255, 180, 0, 0.4),
                0 0 30px rgba(255, 180, 0, 0.3),
                0 0 45px rgba(255, 180, 0, 0.2);
        }
        .offer-card--amber .offer-card__icon i {
            color: #ffb400;
            filter: drop-shadow(0 0 8px rgba(255, 180, 0, 0.6));
        }
        .offer-card--amber .offer-card__icon::after {
            background: radial-gradient(circle, rgba(255, 180, 0, 0.6) 0%, transparent 60%);
        }
        .offer-card--amber:hover {
            border-color: rgba(255, 180, 0, 0.4);
        }
        /* Purple variant */
        .offer-card--purple .offer-card__icon {
            background: rgba(168, 85, 247, 0.25);
            border: 1px solid rgba(168, 85, 247, 0.5);
            box-shadow:
                0 0 15px rgba(168, 85, 247, 0.4),
                0 0 30px rgba(168, 85, 247, 0.3),
                0 0 45px rgba(168, 85, 247, 0.2);
        }
        .offer-card--purple .offer-card__icon i {
            color: #c084fc;
            filter: drop-shadow(0 0 8px rgba(168, 85, 247, 0.6));
        }
        .offer-card--purple .offer-card__icon::after {
            background: radial-gradient(circle, rgba(168, 85, 247, 0.6) 0%, transparent 60%);
        }
        .offer-card--purple:hover {
            border-color: rgba(168, 85, 247, 0.4);
        }

        /* Offer card buttons */
        .offer-card__actions {
            margin-left: auto;
            flex-shrink: 0;
        }
        .offer-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .offer-btn--primary {
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.4);
            color: #34d399;
        }
        .offer-btn--primary:hover {
            background: rgba(16, 185, 129, 0.25);
            border-color: rgba(16, 185, 129, 0.6);
            transform: translateY(-1px);
        }
        .offer-btn--disabled {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            color: #52525b;
            cursor: not-allowed;
        }

        @media (max-width: 640px) {
            .offer-card__actions {
                margin-left: 0;
                margin-top: 12px;
                width: 100%;
            }
            .offer-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* ==================== MOBILE STYLES - PROFESSIONAL ONEPAGE ==================== */
        @media (max-width: 767px) {
            /* Base resets */
            .section-content {
                opacity: 1;
                transform: none;
            }

            /* Track section glow */
            .track-section::before {
                background: radial-gradient(ellipse 100% 60% at 50% 20%, var(--accent-glow, rgba(99,102,241,0.12)) 0%, transparent 70%);
            }

            /* ===== GLOBAL SECTION LAYOUT ===== */
            .fullpage-section .content-area {
                padding: 0 max(7vw, env(safe-area-inset-right, 7vw)) !important;
                padding-left: max(7vw, env(safe-area-inset-left, 7vw)) !important;
                padding-top: max(80px, 12vh) !important;
                padding-bottom: max(40px, 6vh, env(safe-area-inset-bottom, 0)) !important;
            }
            .fullpage-section .section-content {
                justify-content: center !important;
                gap: 0;
            }

            /* ===== SECTION 0: HERO ===== */
            .fullpage-section[data-section="0"] .section-content > .flex.items-center.gap-3 {
                margin-bottom: clamp(24px, 5vh, 40px);
            }
            .fullpage-section[data-section="0"] .flex.items-center.gap-3 img {
                width: clamp(48px, 14vw, 64px);
                height: clamp(48px, 14vw, 64px);
            }
            .fullpage-section[data-section="0"] .flex.items-center.gap-3 .text-white {
                font-size: clamp(15px, 4vw, 18px);
            }
            .fullpage-section[data-section="0"] .flex.items-center.gap-3 .text-zinc-500 {
                font-size: clamp(13px, 3.5vw, 16px);
            }
            .fullpage-section[data-section="0"] h1 {
                font-size: clamp(32px, 9vw, 52px);
                line-height: 1.12;
                margin-bottom: clamp(16px, 4vh, 28px);
            }
            .fullpage-section[data-section="0"] p.text-zinc-400 {
                font-size: clamp(15px, 4.2vw, 20px) !important;
                line-height: 1.7;
                margin-bottom: clamp(24px, 5vh, 40px) !important;
            }
            .fullpage-section[data-section="0"] .btn-primary {
                width: 100%;
                justify-content: center;
                height: clamp(52px, 8vh, 64px);
                font-size: clamp(15px, 4vw, 18px);
                border-radius: 14px;
            }

            /* ===== SECTION 1: DROGA ===== */
            .fullpage-section[data-section="1"] .text-\[14px\] {
                font-size: clamp(11px, 3vw, 14px);
                margin-bottom: clamp(16px, 3vh, 28px);
            }
            .fullpage-section[data-section="1"] h2 {
                font-size: clamp(30px, 8vw, 48px) !important;
                line-height: 1.15;
                margin-bottom: clamp(20px, 4vh, 32px);
            }
            .fullpage-section[data-section="1"] p.text-zinc-400 {
                font-size: clamp(15px, 4vw, 19px) !important;
                line-height: 1.7;
                margin-bottom: clamp(24px, 5vh, 40px) !important;
            }
            .fullpage-section[data-section="1"] .flex.items-center.gap-4 {
                gap: clamp(8px, 2vw, 12px) !important;
                flex-wrap: wrap;
            }
            .fullpage-section[data-section="1"] .flex.items-center.gap-4 > div {
                padding: clamp(6px, 1.5vw, 10px) clamp(12px, 3vw, 18px);
                font-size: clamp(12px, 3.2vw, 15px);
            }

            /* ===== SECTIONS 2,3,4: TRACK RECORD ===== */
            .track-icon {
                width: clamp(64px, 18vw, 96px);
                height: clamp(64px, 18vw, 96px);
                border-radius: clamp(18px, 5vw, 28px);
                margin-bottom: clamp(16px, 3vh, 28px);
            }
            .track-icon i {
                font-size: clamp(28px, 8vw, 48px) !important;
            }
            .fullpage-section[data-section="2"] .flex.items-center.gap-3,
            .fullpage-section[data-section="3"] .flex.items-center.gap-3,
            .fullpage-section[data-section="4"] .flex.items-center.gap-3 {
                margin-bottom: clamp(8px, 2vh, 16px) !important;
            }
            .fullpage-section[data-section="2"] .flex.items-center.gap-3 .text-\[13px\],
            .fullpage-section[data-section="3"] .flex.items-center.gap-3 .text-\[13px\],
            .fullpage-section[data-section="4"] .flex.items-center.gap-3 .text-\[13px\] {
                font-size: clamp(11px, 3vw, 14px);
            }
            .fullpage-section[data-section="2"] h2,
            .fullpage-section[data-section="3"] h2,
            .fullpage-section[data-section="4"] h2 {
                font-size: clamp(30px, 8vw, 48px) !important;
                margin-bottom: clamp(8px, 2vh, 16px);
            }
            .fullpage-section p[class*="text-emerald-400"],
            .fullpage-section p[class*="text-[#ffb400]"],
            .fullpage-section p[class*="text-purple-400"] {
                font-size: clamp(18px, 5vw, 28px) !important;
                margin-bottom: clamp(16px, 3vh, 28px) !important;
            }
            .fullpage-section[data-section="2"] p.text-zinc-400,
            .fullpage-section[data-section="3"] p.text-zinc-400,
            .fullpage-section[data-section="4"] p.text-zinc-400 {
                font-size: clamp(14px, 4vw, 18px) !important;
                line-height: 1.7;
                margin-bottom: clamp(20px, 4vh, 32px) !important;
            }
            .fullpage-section[data-section="2"] > .content-area > .section-content > .flex.items-center.gap-8,
            .fullpage-section[data-section="3"] > .content-area > .section-content > .flex.items-center.gap-8,
            .fullpage-section[data-section="4"] > .content-area > .section-content > .flex.items-center.gap-6 {
                gap: clamp(16px, 5vw, 32px) !important;
                flex-wrap: wrap;
            }
            .fullpage-section[data-section="2"] .flex.items-center.gap-8 .flex.items-center.gap-2,
            .fullpage-section[data-section="3"] .flex.items-center.gap-8 .flex.items-center.gap-2,
            .fullpage-section[data-section="4"] .flex.items-center.gap-6 .flex.items-center.gap-2 {
                font-size: clamp(13px, 3.5vw, 16px);
            }

            /* ===== SECTION 5: MOTTO ===== */
            .fullpage-section[data-section="5"] blockquote {
                font-size: clamp(22px, 6vw, 38px) !important;
                line-height: 1.45;
                padding-left: clamp(20px, 5vw, 32px);
                border-left: 3px solid rgba(255,255,255,0.15);
            }
            .fullpage-section[data-section="5"] p.mt-8 {
                margin-top: clamp(24px, 5vh, 40px);
                font-size: clamp(15px, 4vw, 19px) !important;
            }

            /* ===== SECTION 6: OFERTA ===== */
            .fullpage-section[data-section="6"] .text-\[14px\] {
                font-size: clamp(10px, 2.8vw, 13px) !important;
                margin-bottom: clamp(4px, 1vh, 8px);
            }
            .fullpage-section[data-section="6"] h2 {
                font-size: clamp(24px, 6.5vw, 38px) !important;
                margin-bottom: clamp(4px, 1vh, 10px);
            }
            .fullpage-section[data-section="6"] > .content-area > .section-content > p.text-\[17px\] {
                font-size: clamp(13px, 3.5vw, 16px) !important;
                margin-bottom: clamp(12px, 2.5vh, 20px) !important;
            }
            .offer-cards {
                gap: clamp(8px, 2vw, 14px);
            }
            .offer-card {
                padding: clamp(12px, 3vw, 16px);
                gap: clamp(12px, 3vw, 16px);
                background: rgba(255,255,255,0.03);
                flex-direction: row;
                align-items: center;
            }
            .offer-card__icon {
                width: clamp(44px, 11vw, 56px);
                height: clamp(44px, 11vw, 56px);
                border-radius: clamp(10px, 2.5vw, 14px);
                flex-shrink: 0;
            }
            .offer-card__icon i {
                font-size: clamp(20px, 5.5vw, 28px);
            }
            .offer-card__icon::after {
                display: none;
            }
            .offer-card__content {
                flex: 1;
                min-width: 0;
            }
            .offer-card__content h3 {
                font-size: clamp(14px, 3.8vw, 17px);
                margin-bottom: 2px;
            }
            .offer-card__content p {
                font-size: clamp(11px, 3vw, 14px);
                line-height: 1.35;
                color: #a1a1aa;
            }
            .offer-card__actions {
                display: none;
            }

            /* ===== SECTION 7: CTA + FOOTER ===== */
            .fullpage-section[data-section="7"] h2 {
                font-size: clamp(32px, 9vw, 56px) !important;
                margin-bottom: clamp(12px, 2.5vh, 20px);
            }
            .fullpage-section[data-section="7"] > .content-area > .section-content > p.text-zinc-400 {
                font-size: clamp(15px, 4vw, 20px) !important;
                margin-bottom: clamp(24px, 5vh, 40px) !important;
            }
            .fullpage-section[data-section="7"] .btn-primary {
                width: 100%;
                justify-content: center;
                height: clamp(52px, 8vh, 64px);
                font-size: clamp(15px, 4vw, 18px);
                margin-bottom: clamp(32px, 6vh, 48px) !important;
            }
            .fullpage-section[data-section="7"] .border-t {
                padding-top: clamp(20px, 4vh, 32px);
                margin-top: 0;
            }
            .fullpage-section[data-section="7"] .border-t > .mb-10 {
                margin-bottom: clamp(16px, 3vh, 24px) !important;
            }
            .fullpage-section[data-section="7"] .border-t .flex.items-center.gap-4 {
                gap: clamp(12px, 3vw, 18px);
                margin-bottom: clamp(12px, 2.5vh, 20px);
            }
            .fullpage-section[data-section="7"] .border-t .flex.items-center.gap-4 img {
                width: clamp(44px, 12vw, 60px);
                height: clamp(44px, 12vw, 60px);
            }
            .fullpage-section[data-section="7"] .border-t .flex.items-center.gap-3 {
                gap: clamp(10px, 2.5vw, 16px);
            }
            .fullpage-section[data-section="7"] .border-t .flex.items-center.gap-3 a {
                width: clamp(38px, 10vw, 48px);
                height: clamp(38px, 10vw, 48px);
            }
            .fullpage-section[data-section="7"] .border-t .flex.items-center.gap-3 a svg {
                width: clamp(16px, 4.5vw, 22px);
                height: clamp(16px, 4.5vw, 22px);
            }
            .fullpage-section[data-section="7"] .text-\[13px\] {
                font-size: clamp(11px, 3vw, 14px) !important;
            }
        }

        /* Mobile scroll indicator */
        .scroll-indicator {
            display: none;
        }
        @media (max-width: 767px) {
            .scroll-indicator {
                display: flex;
                position: absolute;
                bottom: max(20px, 3vh);
                left: 50%;
                transform: translateX(-50%);
                flex-direction: column;
                align-items: center;
                gap: 6px;
                color: rgba(255,255,255,0.35);
                font-size: clamp(8px, 2.2vw, 10px);
                font-weight: 500;
                letter-spacing: 0.15em;
                z-index: 20;
                animation: bounce 2s ease-in-out infinite;
            }
            .scroll-indicator svg {
                width: clamp(16px, 4.5vw, 22px);
                height: clamp(16px, 4.5vw, 22px);
            }
            @keyframes bounce {
                0%, 100% { transform: translateX(-50%) translateY(0); }
                50% { transform: translateX(-50%) translateY(6px); }
            }
        }

        /* Builder controls */
        #builder-controls {
            display: none;
        }
        @media (min-width: 768px) {
            #builder-controls {
                display: block;
                position: absolute;
                bottom: 40px;
                right: 40px;
                z-index: 10;
                background: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(16px);
                border: 1px solid rgba(255,255,255,0.08);
                border-radius: 16px;
                padding: 12px 16px;
                min-width: auto;
                transition: all 0.3s ease;
            }
            #builder-controls.builder-expanded {
                padding: 20px 24px;
                min-width: 260px;
            }
        }
        .builder-title {
            font-size: 12px;
            font-weight: 600;
            color: rgba(255,255,255,0.7);
            margin-bottom: 0;
            text-align: center;
            transition: all 0.3s ease;
        }
        #builder-controls.builder-expanded .builder-title {
            font-size: 13px;
            color: rgba(255,255,255,0.9);
            margin-bottom: 16px;
        }
        .builder-collapsed-hint {
            font-size: 10px;
            color: rgba(255,255,255,0.35);
            text-align: center;
            margin-top: 4px;
        }
        #builder-controls.builder-expanded .builder-collapsed-hint {
            display: none;
        }
        /* Hide controls until expanded */
        #builder-controls .shape-selector,
        #builder-controls .color-selector,
        #builder-controls .builder-actions,
        #builder-controls .builder-hint {
            display: none;
        }
        #builder-controls.builder-expanded .shape-selector {
            display: grid;
        }
        #builder-controls.builder-expanded .color-selector,
        #builder-controls.builder-expanded .builder-actions {
            display: flex;
        }
        #builder-controls.builder-expanded .builder-hint {
            display: block;
        }
        .shape-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }
        .shape-btn {
            aspect-ratio: 1;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .shape-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        .shape-btn.active {
            background: rgba(52, 211, 153, 0.2);
            border-color: rgba(52, 211, 153, 0.5);
        }
        .shape-btn canvas {
            width: 28px;
            height: 28px;
        }
        .color-selector {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-bottom: 12px;
        }
        .color-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .color-btn canvas {
            width: 20px;
            height: 20px;
        }
        .color-btn:hover {
            transform: scale(1.1);
        }
        .color-btn.active {
            border-color: #fff;
            transform: scale(1.15);
        }
        .builder-actions {
            display: flex;
            gap: 8px;
        }
        .builder-action {
            flex: 1;
            padding: 10px 16px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            color: rgba(255,255,255,0.7);
            font-size: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .builder-action:hover {
            background: rgba(255,255,255,0.1);
            color: #fff;
        }
        .builder-action.danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: rgba(239, 68, 68, 0.8);
        }
        .builder-action.danger:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        .builder-hint {
            font-size: 11px;
            color: rgba(255,255,255,0.35);
            text-align: center;
            line-height: 1.6;
            margin-top: 12px;
        }

        /* ==================== HEADER ==================== */
        .site-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            /* iOS safe areas for notched devices */
            padding: 12px 16px;
            padding-top: max(12px, env(safe-area-inset-top, 12px));
            padding-left: max(16px, env(safe-area-inset-left, 16px));
            padding-right: max(16px, env(safe-area-inset-right, 16px));
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }
        @media (min-width: 768px) {
            .site-header {
                background: transparent;
                backdrop-filter: none;
                -webkit-backdrop-filter: none;
                border-bottom: none;
            }
        }
        .header-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: #fff;
        }
        .header-logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: #fff;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        .header-logo-text {
            font-size: 15px;
            font-weight: 600;
            letter-spacing: -0.01em;
        }
        .header-cta {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #fff;
            color: #000;
            font-size: 13px;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.2s;
        }
        .header-cta:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 12px rgba(255,255,255,0.15);
        }
        .header-cta svg {
            width: 14px;
            height: 14px;
        }

        /* Desktop header */
        @media (min-width: 768px) {
            .site-header {
                padding: 24px 40px;
            }
            .header-logo-icon {
                width: 36px;
                height: 36px;
                border-radius: 10px;
                font-size: 15px;
            }
            .header-logo-text {
                font-size: 16px;
            }
            .header-cta {
                font-size: 14px;
                padding: 10px 20px;
                border-radius: 10px;
            }
        }
        @media (min-width: 1200px) {
            .site-header {
                padding: 28px 56px;
            }
        }
    </style>
</head>
<body class="font-sans antialiased overflow-x-hidden">

    <!-- Header -->
    <header class="site-header">
        <a href="/" class="header-logo">
            <div class="header-logo-icon">TN</div>
            <span class="header-logo-text">tomekniedzwiecki.pl</span>
        </a>
        <a href="/zapisy" class="header-cta">
            Aplikuj
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </header>

    <!-- Dots Navigation -->
    <nav class="dots-nav" id="dots-nav">
        <button data-section="0" data-label="Start" class="active"></button>
        <button data-section="1" data-label="Droga"></button>
        <button data-section="2" data-label="Sklep"></button>
        <button data-section="3" data-label="TakeDrop"></button>
        <button data-section="4" data-label="Inkubator"></button>
        <button data-section="5" data-label="Motto"></button>
        <button data-section="6" data-label="Współpraca"></button>
        <button data-section="7" data-label="Kontakt"></button>
    </nav>

    <!-- Builder Panel (Fixed on desktop) -->
    <div id="builder-panel">
        <canvas id="builder-canvas"></canvas>
        <div class="builder-overlay"></div>

        <!-- Builder controls -->
        <div id="builder-controls">
            <div class="builder-title">Buduj w 3D</div>
            <div class="builder-collapsed-hint">Kliknij klocek</div>
            <div class="shape-selector" id="shape-selector"></div>
            <div class="color-selector" id="color-selector"></div>
            <div class="builder-actions">
                <button class="builder-action danger" id="clear-btn">Wyczyść</button>
            </div>
            <div class="builder-hint">
                Kliknij = postaw klocek<br>
                Prawy przycisk = usuń klocek
            </div>
        </div>
    </div>

    <!-- Fullpage Container -->
    <div class="fullpage-container" id="fullpage">

        <!-- Section 1: Hero -->
        <section class="fullpage-section track-section flex items-center" data-section="0" id="start" style="--accent-glow: rgba(99, 102, 241, 0.25)">
            <!-- Mobile scroll indicator -->
            <div class="scroll-indicator">
                <span>PRZEWIŃ</span>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12l7 7 7-7"/>
                </svg>
            </div>

            <div class="content-area px-6">
                <div class="section-content visible">
                    <div class="flex items-center gap-3 mb-8">
                        <img src="img/tn_kwadrat.png" alt="Tomek Niedźwiecki"
                             class="w-12 h-12 md:w-14 md:h-14 rounded-2xl object-cover ring-2 ring-white/10">
                        <div>
                            <div class="text-white font-medium text-[15px] mb-0.5">Tomek Niedźwiecki</div>
                            <div class="text-zinc-500 text-[13px] md:text-[14px]">Przedsiębiorca, inwestor, twórca</div>
                        </div>
                    </div>

                    <h1 class="text-[clamp(36px,5vw,56px)] font-bold gradient-text leading-[1.15] tracking-[-0.02em] mb-6">
                        Inwestuję w ludzi<br>i buduję z nimi <span class="whitespace-nowrap">e-biznesy</span>
                    </h1>

                    <p class="text-[18px] md:text-[20px] text-zinc-400 leading-[1.7] mb-10">
                        Zbudowałem 3 firmy o łącznych przychodach ponad <span class="text-white font-medium">70 mln zł</span>.
                        Po sprzedaży udziałów inwestuję w ambitne osoby. Buduję im biznesy,
                        wdrażam w nie i przekazuję stery zostając wspólnikiem.
                    </p>

                    <a href="/zapisy"
                       class="btn-primary inline-flex items-center justify-center gap-2.5 text-black h-14 px-8 rounded-xl text-[16px] font-medium transition-all duration-200 hover:scale-[1.02]">
                        Zgłoś się
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </div>
        </section>

        <!-- Section 2: Track Record Intro -->
        <section class="fullpage-section flex items-center" data-section="1" id="droga">
            <div class="content-area px-6">
                <div class="section-content">
                    <p class="text-[14px] text-zinc-500 tracking-[0.2em] uppercase mb-6">Moja droga</p>

                    <h2 class="text-[42px] md:text-[56px] font-bold text-white leading-[1.1] tracking-[-0.02em] mb-8">
                        15 lat budowania<br>biznesów online
                    </h2>

                    <p class="text-[18px] md:text-[20px] text-zinc-400 leading-[1.7] mb-12">
                        Od <span class="text-emerald-400">sklepu internetowego</span> w dropshippingu założonego na studiach, przez budowę <span class="text-[#ffb400]">platformy SaaS</span> wycenionej na 25 mln zł i wdrożenie <span class="text-purple-400">tysięcy osób</span> w sprzedaż online po sprzedaż udziałów i nowy etap — inwestycję w ludzi i budowę dla nich e-biznesów.
                    </p>

                    <div class="flex items-center gap-4 text-[14px]">
                        <div class="flex items-center gap-2.5 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20">
                            <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                            <span class="text-emerald-400">Sklep</span>
                        </div>
                        <div class="flex items-center gap-2.5 px-3 py-1.5 rounded-full bg-[#ffb400]/10 border border-[#ffb400]/20">
                            <span class="w-2 h-2 rounded-full bg-[#ffb400]"></span>
                            <span class="text-[#ffb400]">TakeDrop</span>
                        </div>
                        <div class="flex items-center gap-2.5 px-3 py-1.5 rounded-full bg-purple-500/10 border border-purple-500/20">
                            <span class="w-2 h-2 rounded-full bg-purple-500"></span>
                            <span class="text-purple-400">Inkubator</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Sklep internetowy -->
        <section class="fullpage-section track-section flex items-center" data-section="2" id="sklep" style="--accent-glow: rgba(16, 185, 129, 0.25)">
            <div class="content-area px-6">
                <div class="section-content">
                    <div class="track-icon bg-gradient-to-br from-emerald-500/20 to-emerald-500/5 border border-emerald-500/20">
                        <i class="ph ph-storefront text-emerald-400 text-5xl"></i>
                    </div>

                    <div class="flex items-center gap-3 mb-5">
                        <span class="text-[13px] text-zinc-500 tracking-wider uppercase">2011 — 2021</span>
                        <span class="w-10 h-px bg-zinc-700"></span>
                    </div>

                    <h2 class="text-[42px] md:text-[56px] font-bold text-white leading-[1.1] tracking-[-0.02em] mb-4">
                        Sklep internetowy
                    </h2>

                    <p class="text-[28px] md:text-[36px] font-medium text-emerald-400 mb-8">
                        Od zera do 40 MLN
                    </p>

                    <p class="text-[17px] md:text-[19px] text-zinc-400 leading-[1.8] mb-10">
                        Zacząłem od dropshippingu na studiach. Po paru latach zbudowałem jeden z największych sklepów e-commerce w swojej niszy. Sprzedaż na poziomie 40 mln zł, zespół 30 osób, ogrom doświadczenia w e-handlu.
                    </p>

                    <div class="flex items-center gap-8 text-[15px] text-zinc-500">
                        <div class="flex items-center gap-2">
                            <i class="ph ph-chart-line-up text-emerald-400 text-lg"></i>
                            <span>40 mln zł przychodu</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="ph ph-users text-emerald-400 text-lg"></i>
                            <span>30 osób w zespole</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: TakeDrop -->
        <section class="fullpage-section track-section flex items-center" data-section="3" id="takedrop" style="--accent-glow: rgba(255, 180, 0, 0.25)">
            <div class="content-area px-6">
                <div class="section-content">
                    <div class="track-icon bg-gradient-to-br from-[#ffb400]/20 to-[#ffb400]/5 border border-[#ffb400]/20">
                        <i class="ph ph-package text-[#ffb400] text-5xl"></i>
                    </div>

                    <div class="flex items-center gap-3 mb-5">
                        <span class="text-[13px] text-zinc-500 tracking-wider uppercase">2017 — 2025</span>
                        <span class="w-10 h-px bg-zinc-700"></span>
                    </div>

                    <h2 class="text-[42px] md:text-[56px] font-bold text-white leading-[1.1] tracking-[-0.02em] mb-4">
                        TakeDrop
                    </h2>

                    <p class="text-[28px] md:text-[36px] font-medium text-[#ffb400] mb-8">
                        Platforma e-commerce i szkolenia
                    </p>

                    <p class="text-[17px] md:text-[19px] text-zinc-400 leading-[1.8] mb-10">
                        Na bazie swoich doświadczeń, potrzeb i problemów stworzyłem platformę e-commerce. Najpierw dla siebie, potem dla innych, którzy chcieli robić to co ja. Dzisiaj korzysta z niej ponad 5 tysięcy sklepów online. W moich szkoleniach, kursach i mentoringach wzięło udział parę tysięcy osób.
                    </p>

                    <div class="flex items-center gap-8 text-[15px] text-zinc-500">
                        <div class="flex items-center gap-2">
                            <i class="ph ph-code text-[#ffb400] text-lg"></i>
                            <span>+5 000 sklepów online</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="ph ph-graduation-cap text-[#ffb400] text-lg"></i>
                            <span>Program szkoleniowy</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: Inkubator -->
        <section class="fullpage-section track-section flex items-center" data-section="4" id="inkubator" style="--accent-glow: rgba(168, 85, 247, 0.25)">
            <div class="content-area px-6">
                <div class="section-content">
                    <div class="track-icon bg-gradient-to-br from-purple-500/20 to-purple-500/5 border border-purple-500/20">
                        <i class="ph ph-graduation-cap text-purple-400 text-5xl"></i>
                    </div>

                    <div class="flex items-center gap-3 mb-5">
                        <span class="text-[13px] text-zinc-500 tracking-wider uppercase">2024 — 2025</span>
                        <span class="w-10 h-px bg-zinc-700"></span>
                    </div>

                    <h2 class="text-[42px] md:text-[56px] font-bold text-white leading-[1.1] tracking-[-0.02em] mb-4">
                        Inkubator
                    </h2>

                    <p class="text-[28px] md:text-[36px] font-medium text-purple-400 mb-8">
                        Tysiące osób z ułatwionym startem
                    </p>

                    <p class="text-[17px] md:text-[19px] text-zinc-400 leading-[1.8] mb-10">
                        Pierwszy w Polsce zbudowałem system łączący prawo, podatki i technologię aby umożliwić osobom bez działalności legalne rozpoczęcie sprzedaży w ramach inkubatora TakeTrust. Bez limitu przychodu, bez ZUS z pełnym bezpieczeństwem.
                    </p>

                    <div class="flex items-center gap-6 text-[15px] text-zinc-500">
                        <div class="flex items-center gap-2">
                            <i class="ph ph-minus text-purple-400 text-lg"></i>
                            <span>Bez ZUS</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="ph ph-minus text-purple-400 text-lg"></i>
                            <span>Bez działalności</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="ph ph-shield-check text-purple-400 text-lg"></i>
                            <span>Pełne bezpieczeństwo</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: Motto -->
        <section class="fullpage-section flex items-center" data-section="5" id="motto">
            <div class="content-area px-6">
                <div class="section-content">
                    <blockquote class="text-[28px] md:text-[36px] lg:text-[42px] font-medium text-white leading-[1.4] tracking-[-0.01em]">
                        <span class="text-zinc-500">"</span>Budując biznes, rozwiązujemy problemy, za które klienci chcą płacić – <span class="text-emerald-400">dużo, często</span> i bez wahania. Pamiętaj: Im mocniej problem boli, tym łatwiej sprzedać na niego rozwiązanie.<span class="text-zinc-500">"</span>
                    </blockquote>
                    <p class="mt-8 text-[18px] text-zinc-500">— Tomasz Niedźwiecki</p>
                </div>
            </div>
        </section>

        <!-- Section 7: Współpraca -->
        <section class="fullpage-section flex items-center" data-section="6" id="oferta">
            <div class="content-area px-6">
                <div class="section-content">
                    <p class="text-[14px] text-zinc-500 tracking-[0.2em] uppercase mb-5">Współpraca</p>
                    <h2 class="text-[36px] md:text-[44px] font-bold text-white tracking-[-0.02em] leading-[1.2] mb-6">
                        Sprawdzony model.<br>
                        <span class="text-zinc-500">Nowa nisza. Twój biznes.</span>
                    </h2>

                    <p class="text-[17px] text-zinc-400 leading-relaxed mb-10">
                        Zbuduję dla Ciebie biznes, wdrożę Cię w&nbsp;jego prowadzenie i&nbsp;przekażę stery — zostając Twoim wspólnikiem.
                    </p>

                    <div class="offer-cards">
                        <div class="offer-card offer-card--emerald" id="offer-ecommerce">
                            <div class="offer-card__icon">
                                <i class="ph-duotone ph-shopping-bag"></i>
                            </div>
                            <div class="offer-card__content">
                                <h3>Nowoczesny sklep e-commerce</h3>
                                <p>Nie buduję sklepów — tworzę przyciągające marki</p>
                            </div>
                            <div class="offer-card__actions">
                                <a href="/oferta/sklep-ecommerce/" class="offer-btn offer-btn--primary">
                                    <i class="ph ph-arrow-right"></i>
                                    Szczegóły oferty
                                </a>
                            </div>
                        </div>

                        <div class="offer-card offer-card--amber">
                            <div class="offer-card__icon">
                                <i class="ph-duotone ph-code"></i>
                            </div>
                            <div class="offer-card__content">
                                <h3>Aplikacje / Narzędzia / SaaS</h3>
                                <p>Wdrażam rozwiązania, które stają się niezbędne</p>
                            </div>
                            <div class="offer-card__actions">
                                <span class="offer-btn offer-btn--disabled">
                                    <i class="ph ph-clock"></i>
                                    Wkrótce
                                </span>
                            </div>
                        </div>

                        <div class="offer-card offer-card--purple">
                            <div class="offer-card__icon">
                                <i class="ph-duotone ph-play-circle"></i>
                            </div>
                            <div class="offer-card__content">
                                <h3>Kursy online</h3>
                                <p>Pokazuję jak sprzedawać wiedzę aby zarabiać i dawać realną wartość</p>
                            </div>
                            <div class="offer-card__actions">
                                <span class="offer-btn offer-btn--disabled">
                                    <i class="ph ph-clock"></i>
                                    Wkrótce
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 8: CTA + Footer -->
        <section class="fullpage-section track-section flex items-center" data-section="7" id="kontakt" style="--accent-glow: rgba(52, 211, 153, 0.22)">
            <div class="content-area px-6">
                <div class="section-content">
                    <h2 class="text-[48px] md:text-[64px] font-bold text-white tracking-[-0.03em] mb-4">
                        Chcesz taki biznes?
                    </h2>

                    <p class="text-[18px] md:text-[20px] text-zinc-400 mb-10">
                        Przekonaj mnie, że warto w Ciebie zainwestować.
                    </p>

                    <a href="/zapisy"
                       class="btn-primary inline-flex items-center justify-center gap-2.5 text-black h-14 px-10 rounded-xl text-[17px] font-medium transition-all duration-200 hover:scale-[1.02] mb-20">
                        Aplikuj
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>

                    <!-- Footer -->
                    <div class="border-t border-white/[0.06] pt-10">
                        <!-- Author card -->
                        <div class="mb-10">
                            <div class="flex items-center gap-4 mb-4">
                                <img src="img/tn_kwadrat.png" alt="Tomek Niedźwiecki"
                                     class="w-14 h-14 md:w-16 md:h-16 rounded-2xl object-cover ring-2 ring-white/10">
                                <div>
                                    <div class="text-white font-medium text-[15px] mb-0.5">Tomek Niedźwiecki</div>
                                    <div class="text-zinc-500 text-[13px] md:text-[14px]">Przedsiębiorca, inwestor, twórca</div>
                                </div>
                            </div>
                            <!-- Social icons -->
                            <div class="flex items-center gap-3">
                                <a href="https://www.youtube.com/@TomekNiedzwiecki" target="_blank" rel="noopener"
                                   class="w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.06] flex items-center justify-center text-zinc-500 hover:text-white hover:bg-white/[0.08] transition-all">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                                    </svg>
                                </a>
                                <a href="https://www.instagram.com/tomekniedzwiecki/" target="_blank" rel="noopener"
                                   class="w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.06] flex items-center justify-center text-zinc-500 hover:text-white hover:bg-white/[0.08] transition-all">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                    </svg>
                                </a>
                                <a href="https://www.linkedin.com/in/tomasz-niedzwiecki/" target="_blank" rel="noopener"
                                   class="w-10 h-10 rounded-xl bg-white/[0.04] border border-white/[0.06] flex items-center justify-center text-zinc-500 hover:text-white hover:bg-white/[0.08] transition-all">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <!-- Legal -->
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 text-[13px] text-zinc-600">
                            <span>© 2025 Tomasz Niedźwiecki · NIP 6972240255</span>
                            <div class="flex items-center gap-6">
                                <a href="/dokumenty/regulamin.html" class="hover:text-zinc-400 transition-colors">Regulamin</a>
                                <a href="/dokumenty/polityka-prywatnosci.html" class="hover:text-zinc-400 transition-colors">Prywatność</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- Fullpage Scroll JavaScript -->
    <script>
        (function() {
            const container = document.getElementById('fullpage');
            const sections = container.querySelectorAll('.fullpage-section');
            const dots = document.querySelectorAll('#dots-nav button');
            let currentSection = 0;
            let isScrolling = false;
            let scrollTimeout;

            const isDesktop = () => window.innerWidth >= 768;

            const updateDots = (index) => {
                dots.forEach((dot, i) => {
                    dot.classList.toggle('active', i === index);
                });
            };

            const scrollToSection = (index) => {
                if (index < 0 || index >= sections.length) return;

                isScrolling = true;
                container.classList.add('is-scrolling');
                currentSection = index;
                updateDots(index);

                sections[index].scrollIntoView({ behavior: 'smooth' });

                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    isScrolling = false;
                    container.classList.remove('is-scrolling');
                }, 1000);
            };

            // Section to Builder palette mapping
            const sectionPalettes = {
                0: 'default',
                1: 'default',
                2: 'emerald',
                3: 'amber',
                4: 'purple',
                5: 'default',
                6: 'default',
                7: 'emerald'
            };

            const createObserver = () => {
                return new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const index = parseInt(entry.target.dataset.section);
                            currentSection = index;
                            updateDots(index);

                            if (window.setBuilderPalette) {
                                window.setBuilderPalette(sectionPalettes[index] || 'default');
                            }

                            const content = entry.target.querySelector('.section-content');
                            if (content) content.classList.add('visible');
                        }
                    });
                }, {
                    root: container,
                    threshold: 0.5
                });
            };

            let observer = createObserver();
            sections.forEach(section => observer.observe(section));

            window.addEventListener('resize', () => {
                observer.disconnect();
                observer = createObserver();
                sections.forEach(section => observer.observe(section));
            });

            dots.forEach(dot => {
                dot.addEventListener('click', () => {
                    const index = parseInt(dot.dataset.section);
                    scrollToSection(index);
                });
            });

            container.addEventListener('wheel', (e) => {
                if (!isDesktop() || isScrolling) {
                    if (isScrolling) e.preventDefault();
                    return;
                }

                const delta = e.deltaY;
                if (Math.abs(delta) < 30) return;

                e.preventDefault();

                if (delta > 0 && currentSection < sections.length - 1) {
                    scrollToSection(currentSection + 1);
                } else if (delta < 0 && currentSection > 0) {
                    scrollToSection(currentSection - 1);
                }
            }, { passive: false });

            document.addEventListener('keydown', (e) => {
                if (!isDesktop()) return;

                if (e.code === 'PageDown') {
                    e.preventDefault();
                    scrollToSection(currentSection + 1);
                } else if (e.code === 'PageUp') {
                    e.preventDefault();
                    scrollToSection(currentSection - 1);
                }
            });

            let touchStartY = 0;
            container.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });

            container.addEventListener('touchend', (e) => {
                if (!isDesktop() || isScrolling) return;

                const touchEndY = e.changedTouches[0].clientY;
                const diff = touchStartY - touchEndY;

                if (Math.abs(diff) > 50) {
                    if (diff > 0) scrollToSection(currentSection + 1);
                    else scrollToSection(currentSection - 1);
                }
            }, { passive: true });

            // Handle URL hash navigation on page load
            const handleHashNavigation = () => {
                const hash = window.location.hash.substring(1);
                if (!hash) return;

                const targetSection = document.getElementById(hash);
                if (targetSection && targetSection.dataset.section !== undefined) {
                    const index = parseInt(targetSection.dataset.section);
                    if (!isNaN(index)) {
                        setTimeout(() => scrollToSection(index), 100);
                    }
                }
            };

            handleHashNavigation();
            window.addEventListener('hashchange', handleHashNavigation);
        })();
    </script>

    <!-- Isometric 3D Builder with Tetris Shapes -->
    <script>
        (function() {
            const canvas = document.getElementById('builder-canvas');
            if (!canvas || window.innerWidth < 768) return;

            const ctx = canvas.getContext('2d');
            let W, H;

            const resize = () => {
                W = canvas.width = canvas.offsetWidth;
                H = canvas.height = canvas.offsetHeight;
            };
            resize();
            window.addEventListener('resize', resize);

            const PALETTES = {
                default: ['#6366f1', '#818cf8', '#a855f7', '#c084fc'],
                emerald: ['#34d399', '#10b981', '#6ee7b7', '#4ade80'],
                amber: ['#ffb400', '#fbbf24', '#fcd34d', '#f59e0b'],
                purple: ['#a855f7', '#c084fc', '#8b5cf6', '#d8b4fe']
            };
            let currentPalette = 'default';
            window.setBuilderPalette = (p) => { if (PALETTES[p]) currentPalette = p; };

            // Isometric settings
            const TILE_W = 60;
            const TILE_H = 30;
            const BLOCK_H = 40;
            const GRID = 10;

            // 4 practical shapes for building
            const SHAPES = [
                [[0,0]],                       // Single block
                [[0,0], [1,0]],                // Horizontal 2
                [[0,0], [1,0], [0,1], [1,1]], // Square 2x2
                [[0,0], [1,0], [2,0]],         // Horizontal 3
            ];

            const blocks = [];
            let selectedColor = '#6366f1';
            let selectedShape = 0; // Default single block
            let hoverCell = null;
            let userTookControl = false; // Track if user placed a block

            // Get the top level at a given grid position
            const getTopLevel = (gx, gy) => {
                let maxZ = -1;
                blocks.forEach(b => {
                    if (b.gx === gx && b.gy === gy && b.gz > maxZ) maxZ = b.gz;
                });
                return maxZ + 1;
            };

            // Get the placement level for a shape (highest top level among all shape cells)
            const getShapePlacementLevel = (baseX, baseY) => {
                const cells = SHAPES[selectedShape].map(([dx, dy]) => ({
                    gx: baseX + dx,
                    gy: baseY + dy
                }));
                let maxLevel = 0;
                cells.forEach(({ gx, gy }) => {
                    const level = getTopLevel(gx, gy);
                    if (level > maxLevel) maxLevel = level;
                });
                return maxLevel;
            };

            // Shape selector
            const shapeSelector = document.getElementById('shape-selector');
            SHAPES.forEach((shape, idx) => {
                const btn = document.createElement('button');
                btn.className = 'shape-btn' + (idx === 0 ? ' active' : '');
                const miniCanvas = document.createElement('canvas');
                miniCanvas.width = 28;
                miniCanvas.height = 28;
                const miniCtx = miniCanvas.getContext('2d');

                // Draw mini shape
                const minX = Math.min(...shape.map(c => c[0]));
                const minY = Math.min(...shape.map(c => c[1]));
                const maxX = Math.max(...shape.map(c => c[0]));
                const maxY = Math.max(...shape.map(c => c[1]));
                const shapeW = maxX - minX + 1;
                const shapeH = maxY - minY + 1;
                const cellSize = Math.min(24 / shapeW, 24 / shapeH);
                const offsetX = (28 - shapeW * cellSize) / 2;
                const offsetY = (28 - shapeH * cellSize) / 2;

                miniCtx.fillStyle = '#6366f1';
                shape.forEach(([x, y]) => {
                    miniCtx.fillRect(
                        offsetX + (x - minX) * cellSize + 1,
                        offsetY + (y - minY) * cellSize + 1,
                        cellSize - 2,
                        cellSize - 2
                    );
                });

                btn.appendChild(miniCanvas);
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.shape-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selectedShape = idx;
                });
                shapeSelector.appendChild(btn);
            });

            // Color selector with icons
            const colors = ['#6366f1', '#34d399', '#ffb400', '#a855f7', '#ef4444', '#06b6d4'];
            const colorSelector = document.getElementById('color-selector');

            // Helper for color adjustment (local copy for selector)
            const adjustColorSel = (hex, amt) => {
                const num = parseInt(hex.slice(1), 16);
                const r = Math.max(0, Math.min(255, (num >> 16) + amt));
                const g = Math.max(0, Math.min(255, ((num >> 8) & 0xFF) + amt));
                const b = Math.max(0, Math.min(255, (num & 0xFF) + amt));
                return `rgb(${r},${g},${b})`;
            };

            // Icon mapping for selector - data & growth theme
            const SELECTOR_ICONS = {
                '#6366f1': 'trending',
                '#34d399': 'users',
                '#ffb400': 'percent',
                '#a855f7': 'bars',
                '#06b6d4': 'eye',
                '#ef4444': 'heart',
            };
            const getIconSel = (color) => SELECTOR_ICONS[color] || 'trending';

            // Draw icon on small canvas for color selector
            const drawSelectorIcon = (ctx, icon, color) => {
                const w = 40, h = 40;
                const x = w / 2, y = h / 2;
                ctx.clearRect(0, 0, w, h);
                ctx.strokeStyle = adjustColorSel(color, -80);
                ctx.fillStyle = adjustColorSel(color, -60);
                ctx.lineWidth = 2.5;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                const s = 12;

                switch(icon) {
                    case 'trending': // Trending up line
                        ctx.beginPath();
                        ctx.moveTo(x - s * 0.8, y + s * 0.5);
                        ctx.lineTo(x - s * 0.2, y);
                        ctx.lineTo(x + s * 0.2, y + s * 0.3);
                        ctx.lineTo(x + s * 0.8, y - s * 0.5);
                        ctx.stroke();
                        ctx.beginPath();
                        ctx.moveTo(x + s * 0.8, y - s * 0.5);
                        ctx.lineTo(x + s * 0.35, y - s * 0.45);
                        ctx.moveTo(x + s * 0.8, y - s * 0.5);
                        ctx.lineTo(x + s * 0.7, y - s * 0.05);
                        ctx.stroke();
                        break;

                    case 'users': // Two people
                        ctx.beginPath();
                        ctx.arc(x - s * 0.25, y - s * 0.3, s * 0.28, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(x - s * 0.25, y + s * 0.4, s * 0.4, Math.PI, 0);
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(x + s * 0.4, y - s * 0.35, s * 0.24, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(x + s * 0.4, y + s * 0.3, s * 0.35, Math.PI, 0);
                        ctx.fill();
                        break;

                    case 'percent': // Percentage with arrow
                        ctx.font = `bold ${s * 1.2}px Inter, sans-serif`;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('%', x - s * 0.15, y + s * 0.1);
                        ctx.beginPath();
                        ctx.moveTo(x + s * 0.55, y + s * 0.2);
                        ctx.lineTo(x + s * 0.55, y - s * 0.4);
                        ctx.lineTo(x + s * 0.3, y - s * 0.15);
                        ctx.moveTo(x + s * 0.55, y - s * 0.4);
                        ctx.lineTo(x + s * 0.8, y - s * 0.15);
                        ctx.stroke();
                        break;

                    case 'bars': // 3 rising bars
                        const barW = s * 0.38;
                        const gap = s * 0.12;
                        ctx.fillRect(x - barW * 1.5 - gap, y + s * 0.1, barW, s * 0.7);
                        ctx.fillRect(x - barW * 0.5, y - s * 0.25, barW, s * 1.05);
                        ctx.fillRect(x + barW * 0.5 + gap, y - s * 0.6, barW, s * 1.4);
                        break;

                    case 'eye': // Eye icon
                        ctx.beginPath();
                        ctx.moveTo(x - s * 0.85, y);
                        ctx.quadraticCurveTo(x, y - s * 0.6, x + s * 0.85, y);
                        ctx.quadraticCurveTo(x, y + s * 0.6, x - s * 0.85, y);
                        ctx.stroke();
                        ctx.beginPath();
                        ctx.arc(x, y, s * 0.32, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.fillStyle = adjustColorSel(color, 30);
                        ctx.beginPath();
                        ctx.arc(x, y, s * 0.14, 0, Math.PI * 2);
                        ctx.fill();
                        break;

                    case 'heart': // Heart
                        ctx.beginPath();
                        ctx.moveTo(x, y + s * 0.65);
                        ctx.bezierCurveTo(x - s * 0.95, y + s * 0.1, x - s * 0.95, y - s * 0.55, x, y - s * 0.2);
                        ctx.bezierCurveTo(x + s * 0.95, y - s * 0.55, x + s * 0.95, y + s * 0.1, x, y + s * 0.65);
                        ctx.fill();
                        ctx.stroke();
                        break;
                }
            };

            colors.forEach((color, idx) => {
                const btn = document.createElement('button');
                btn.className = 'color-btn' + (idx === 0 ? ' active' : '');
                btn.style.background = color;

                // Add icon canvas
                const iconCanvas = document.createElement('canvas');
                iconCanvas.width = 40;
                iconCanvas.height = 40;
                const iconCtx = iconCanvas.getContext('2d');
                drawSelectorIcon(iconCtx, getIconSel(color), color);
                btn.appendChild(iconCanvas);

                btn.addEventListener('click', () => {
                    document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selectedColor = color;
                });
                colorSelector.appendChild(btn);
            });

            // Clear button
            document.getElementById('clear-btn').addEventListener('click', () => {
                blocks.length = 0;
                userTookControl = true; // User took action
            });

            // Grid to screen (isometric projection)
            const toScreen = (gx, gy, gz) => {
                const cx = W / 2;
                const cy = H / 2 + 80;
                const ox = gx - GRID / 2;
                const oy = gy - GRID / 2;
                return {
                    x: cx + (ox - oy) * TILE_W / 2,
                    y: cy + (ox + oy) * TILE_H / 2 - gz * BLOCK_H
                };
            };

            // Screen to grid
            const toGrid = (sx, sy) => {
                const cx = W / 2;
                const cy = H / 2 + 80;
                const screenX = sx - cx;
                const screenY = sy - cy;
                const ox = (screenX / (TILE_W / 2) + screenY / (TILE_H / 2)) / 2;
                const oy = (screenY / (TILE_H / 2) - screenX / (TILE_W / 2)) / 2;
                const gx = Math.floor(ox + GRID / 2);
                const gy = Math.floor(oy + GRID / 2);
                return { gx, gy };
            };

            const blockAt = (gx, gy, gz) => blocks.find(b => b.gx === gx && b.gy === gy && b.gz === gz);

            // Get current shape cells at position
            const getShapeCells = (baseX, baseY) => {
                return SHAPES[selectedShape].map(([dx, dy]) => ({
                    gx: baseX + dx,
                    gy: baseY + dy
                }));
            };

            // Check if shape can be placed (within grid bounds)
            const canPlaceShape = (baseX, baseY) => {
                const cells = getShapeCells(baseX, baseY);
                return cells.every(({ gx, gy }) =>
                    gx >= 0 && gx < GRID && gy >= 0 && gy < GRID
                );
            };

            const adjustColor = (hex, amt) => {
                const num = parseInt(hex.slice(1), 16);
                const r = Math.max(0, Math.min(255, (num >> 16) + amt));
                const g = Math.max(0, Math.min(255, ((num >> 8) & 0xFF) + amt));
                const b = Math.max(0, Math.min(255, (num & 0xFF) + amt));
                return `rgb(${r},${g},${b})`;
            };

            // Business icons mapped to colors - data & growth theme
            const COLOR_ICONS = {
                '#6366f1': 'trending', // indigo = trending up
                '#34d399': 'users',    // emerald = customers
                '#ffb400': 'percent',  // amber = conversion
                '#a855f7': 'bars',     // purple = revenue
                '#06b6d4': 'eye',      // cyan = views/traffic
                '#ef4444': 'heart',    // red = engagement
            };
            const getIconForColor = (color) => COLOR_ICONS[color] || 'trending';

            // Draw isometric icon on top face
            const drawIcon = (x, y, icon, color) => {
                const topY = y - BLOCK_H + TILE_H / 2;
                ctx.save();
                ctx.globalAlpha = 0.75;
                ctx.strokeStyle = adjustColor(color, -70);
                ctx.fillStyle = adjustColor(color, -50);
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';

                const s = 9;

                switch(icon) {
                    case 'trending': // Trending up line with arrow
                        ctx.beginPath();
                        ctx.moveTo(x - s * 0.8, topY + s * 0.5);
                        ctx.lineTo(x - s * 0.2, topY);
                        ctx.lineTo(x + s * 0.2, topY + s * 0.3);
                        ctx.lineTo(x + s * 0.8, topY - s * 0.5);
                        ctx.stroke();
                        // Arrow head
                        ctx.beginPath();
                        ctx.moveTo(x + s * 0.8, topY - s * 0.5);
                        ctx.lineTo(x + s * 0.35, topY - s * 0.45);
                        ctx.moveTo(x + s * 0.8, topY - s * 0.5);
                        ctx.lineTo(x + s * 0.7, topY - s * 0.05);
                        ctx.stroke();
                        break;

                    case 'users': // Two people silhouettes
                        // Person 1 (front)
                        ctx.beginPath();
                        ctx.arc(x - s * 0.25, topY - s * 0.3, s * 0.25, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(x - s * 0.25, topY + s * 0.35, s * 0.35, Math.PI, 0);
                        ctx.fill();
                        // Person 2 (back)
                        ctx.beginPath();
                        ctx.arc(x + s * 0.35, topY - s * 0.35, s * 0.22, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(x + s * 0.35, topY + s * 0.25, s * 0.3, Math.PI, 0);
                        ctx.fill();
                        break;

                    case 'percent': // Percentage with up arrow
                        ctx.font = `bold ${s * 1.1}px Inter, sans-serif`;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('%', x - s * 0.15, topY + s * 0.1);
                        // Small up arrow
                        ctx.beginPath();
                        ctx.moveTo(x + s * 0.55, topY + s * 0.2);
                        ctx.lineTo(x + s * 0.55, topY - s * 0.4);
                        ctx.lineTo(x + s * 0.3, topY - s * 0.15);
                        ctx.moveTo(x + s * 0.55, topY - s * 0.4);
                        ctx.lineTo(x + s * 0.8, topY - s * 0.15);
                        ctx.stroke();
                        break;

                    case 'bars': // 3 rising bars
                        const barW = s * 0.35;
                        const gap = s * 0.12;
                        ctx.fillRect(x - barW * 1.5 - gap, topY + s * 0.1, barW, s * 0.7);
                        ctx.fillRect(x - barW * 0.5, topY - s * 0.25, barW, s * 1.05);
                        ctx.fillRect(x + barW * 0.5 + gap, topY - s * 0.6, barW, s * 1.4);
                        break;

                    case 'eye': // Eye icon (views/traffic)
                        // Eye outline
                        ctx.beginPath();
                        ctx.moveTo(x - s * 0.85, topY);
                        ctx.quadraticCurveTo(x, topY - s * 0.6, x + s * 0.85, topY);
                        ctx.quadraticCurveTo(x, topY + s * 0.6, x - s * 0.85, topY);
                        ctx.stroke();
                        // Pupil
                        ctx.beginPath();
                        ctx.arc(x, topY, s * 0.3, 0, Math.PI * 2);
                        ctx.fill();
                        // Inner dot
                        ctx.fillStyle = adjustColor(color, 30);
                        ctx.beginPath();
                        ctx.arc(x, topY, s * 0.12, 0, Math.PI * 2);
                        ctx.fill();
                        break;

                    case 'heart': // Heart (engagement/likes)
                        ctx.beginPath();
                        ctx.moveTo(x, topY + s * 0.6);
                        ctx.bezierCurveTo(x - s * 0.9, topY + s * 0.1, x - s * 0.9, topY - s * 0.5, x, topY - s * 0.2);
                        ctx.bezierCurveTo(x + s * 0.9, topY - s * 0.5, x + s * 0.9, topY + s * 0.1, x, topY + s * 0.6);
                        ctx.fill();
                        ctx.stroke();
                        break;
                }
                ctx.restore();
            };

            const drawBlock = (gx, gy, gz, color, alpha = 1, icon = null) => {
                const { x, y } = toScreen(gx, gy, gz);
                ctx.globalAlpha = alpha;

                // Top
                ctx.fillStyle = adjustColor(color, 50);
                ctx.beginPath();
                ctx.moveTo(x, y - BLOCK_H);
                ctx.lineTo(x + TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.lineTo(x, y - BLOCK_H + TILE_H);
                ctx.lineTo(x - TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.closePath();
                ctx.fill();

                // Left
                ctx.fillStyle = adjustColor(color, -30);
                ctx.beginPath();
                ctx.moveTo(x - TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.lineTo(x, y - BLOCK_H + TILE_H);
                ctx.lineTo(x, y + TILE_H);
                ctx.lineTo(x - TILE_W/2, y + TILE_H/2);
                ctx.closePath();
                ctx.fill();

                // Right
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.moveTo(x + TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.lineTo(x, y - BLOCK_H + TILE_H);
                ctx.lineTo(x, y + TILE_H);
                ctx.lineTo(x + TILE_W/2, y + TILE_H/2);
                ctx.closePath();
                ctx.fill();

                // Edges
                ctx.strokeStyle = 'rgba(0,0,0,0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, y - BLOCK_H);
                ctx.lineTo(x + TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.lineTo(x, y - BLOCK_H + TILE_H);
                ctx.lineTo(x - TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.closePath();
                ctx.moveTo(x - TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.lineTo(x - TILE_W/2, y + TILE_H/2);
                ctx.moveTo(x, y - BLOCK_H + TILE_H);
                ctx.lineTo(x, y + TILE_H);
                ctx.moveTo(x + TILE_W/2, y - BLOCK_H + TILE_H/2);
                ctx.lineTo(x + TILE_W/2, y + TILE_H/2);
                ctx.stroke();

                // Draw icon on top face
                if (icon && alpha >= 1) {
                    drawIcon(x, y, icon, color);
                }

                ctx.globalAlpha = 1;
            };

            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const { gx, gy } = toGrid(e.clientX - rect.left, e.clientY - rect.top);
                hoverCell = (gx >= -2 && gx < GRID + 2 && gy >= -2 && gy < GRID + 2) ? { gx, gy } : null;
            });

            canvas.addEventListener('click', (e) => {
                const rect = canvas.getBoundingClientRect();
                const { gx, gy } = toGrid(e.clientX - rect.left, e.clientY - rect.top);

                if (canPlaceShape(gx, gy)) {
                    const placementLevel = getShapePlacementLevel(gx, gy);
                    if (placementLevel < 10) {
                        // User took control - stop auto-build and expand controls
                        if (!userTookControl) {
                            userTookControl = true;
                            stopAutoBuild();
                            document.getElementById('builder-controls').classList.add('builder-expanded');
                        }
                        const cells = getShapeCells(gx, gy);
                        cells.forEach(cell => {
                            blocks.push({ gx: cell.gx, gy: cell.gy, gz: placementLevel, color: selectedColor });
                        });
                    }
                }
            });

            canvas.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const { gx, gy } = toGrid(e.clientX - rect.left, e.clientY - rect.top);
                // Remove the top block at this position
                const topLevel = getTopLevel(gx, gy) - 1;
                if (topLevel >= 0) {
                    // User took control - stop auto-build and expand controls
                    if (!userTookControl) {
                        userTookControl = true;
                        stopAutoBuild();
                        document.getElementById('builder-controls').classList.add('builder-expanded');
                    }
                    const idx = blocks.findIndex(b => b.gx === gx && b.gy === gy && b.gz === topLevel);
                    if (idx >= 0) blocks.splice(idx, 1);
                }
            });

            // Minimalist initial structure - small corner
            const initBlocks = [
                {gx: 4, gy: 4, gz: 0, color: '#6366f1'},  // chart
                {gx: 5, gy: 4, gz: 0, color: '#34d399'},  // coin
                {gx: 4, gy: 5, gz: 0, color: '#06b6d4'},  // target
                {gx: 4, gy: 4, gz: 1, color: '#a855f7'},  // rocket
            ];
            initBlocks.forEach(b => blocks.push(b));

            // Auto-build system - builds an expanding city using all shapes
            let autoBuildInterval = null;
            const autoBuildColors = ['#6366f1', '#34d399', '#ffb400', '#a855f7', '#06b6d4'];

            // Building zones - different areas for different building types
            const buildingZones = [
                { cx: 2, cy: 2, maxH: 4 },   // Corner tower
                { cx: 7, cy: 2, maxH: 3 },   // Top right
                { cx: 2, cy: 7, maxH: 3 },   // Bottom left
                { cx: 7, cy: 7, maxH: 5 },   // Bottom right tall tower
                { cx: 5, cy: 5, maxH: 6 },   // Center main tower
            ];

            let autoBuildPhase = 0;

            // Check if a shape can be placed at position/level
            const canPlaceShapeAt = (shape, baseX, baseY, level) => {
                return shape.every(([dx, dy]) => {
                    const gx = baseX + dx;
                    const gy = baseY + dy;
                    if (gx < 0 || gx >= GRID || gy < 0 || gy >= GRID) return false;
                    // Check if position is free at this level
                    const occupied = blocks.some(b => b.gx === gx && b.gy === gy && b.gz === level);
                    if (occupied) return false;
                    // Check if there's support below (level 0 always has support)
                    if (level === 0) return true;
                    const hasSupport = blocks.some(b => b.gx === gx && b.gy === gy && b.gz === level - 1);
                    return hasSupport;
                });
            };

            // Place a shape
            const placeShapeAt = (shape, baseX, baseY, level, color) => {
                shape.forEach(([dx, dy]) => {
                    blocks.push({ gx: baseX + dx, gy: baseY + dy, gz: level, color });
                });
            };

            const autoBuildStep = () => {
                if (userTookControl) return;

                // Pick a building zone based on phase
                const zone = buildingZones[autoBuildPhase % buildingZones.length];

                // Try to find a good placement in this zone
                const searchRadius = 2;
                const shape = SHAPES[Math.floor(Math.random() * SHAPES.length)];
                const color = autoBuildColors[Math.floor(Math.random() * autoBuildColors.length)];

                // Try multiple positions around the zone center
                let placed = false;
                for (let attempt = 0; attempt < 10 && !placed; attempt++) {
                    const offsetX = Math.floor(Math.random() * (searchRadius * 2 + 1)) - searchRadius;
                    const offsetY = Math.floor(Math.random() * (searchRadius * 2 + 1)) - searchRadius;
                    const baseX = zone.cx + offsetX;
                    const baseY = zone.cy + offsetY;

                    // Find the level to place at (stack on top)
                    for (let level = 0; level <= zone.maxH && !placed; level++) {
                        if (canPlaceShapeAt(shape, baseX, baseY, level)) {
                            placeShapeAt(shape, baseX, baseY, level, color);
                            placed = true;
                        }
                    }
                }

                // Move to next zone
                autoBuildPhase++;
            };

            const startAutoBuild = () => {
                if (autoBuildInterval) return;
                autoBuildInterval = setInterval(autoBuildStep, 1200);
            };

            const stopAutoBuild = () => {
                if (autoBuildInterval) {
                    clearInterval(autoBuildInterval);
                    autoBuildInterval = null;
                }
            };

            // Start auto-building after a short delay
            setTimeout(startAutoBuild, 1500);

            const animate = () => {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, W, H);

                // Grid at level 0
                ctx.strokeStyle = 'rgba(255,255,255,0.1)';
                ctx.lineWidth = 1;
                for (let i = 0; i <= GRID; i++) {
                    let s = toScreen(i, 0, 0), e = toScreen(i, GRID, 0);
                    ctx.beginPath(); ctx.moveTo(s.x, s.y); ctx.lineTo(e.x, e.y); ctx.stroke();
                    s = toScreen(0, i, 0); e = toScreen(GRID, i, 0);
                    ctx.beginPath(); ctx.moveTo(s.x, s.y); ctx.lineTo(e.x, e.y); ctx.stroke();
                }

                // Blocks sorted by depth (painter's algorithm)
                [...blocks].sort((a, b) => {
                    const depthA = a.gx + a.gy;
                    const depthB = b.gx + b.gy;
                    if (depthA !== depthB) return depthA - depthB;
                    return a.gz - b.gz;
                }).forEach(b => drawBlock(b.gx + 0.5, b.gy + 0.5, b.gz, b.color, 1, getIconForColor(b.color)));

                // Hover preview for shape at the correct placement level
                if (hoverCell) {
                    const canPlace = canPlaceShape(hoverCell.gx, hoverCell.gy);
                    const placementLevel = getShapePlacementLevel(hoverCell.gx, hoverCell.gy);

                    if (canPlace && placementLevel < 10) {
                        const cells = getShapeCells(hoverCell.gx, hoverCell.gy);
                        cells.forEach(({ gx, gy }) => {
                            if (gx >= 0 && gx < GRID && gy >= 0 && gy < GRID) {
                                drawBlock(gx + 0.5, gy + 0.5, placementLevel, selectedColor, 0.4);
                            }
                        });
                    }
                }

                requestAnimationFrame(animate);
            };
            animate();
        })();
    </script>
</body>
</html>
