<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zarezerwuj miejsce w grupie | Tomasz Niedźwiecki</title>

    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">

    <!-- Tailwind CSS (built, minified) -->
    <link rel="stylesheet" href="/zapisy/css/zapisy.min.css">

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        html, body {
            height: 100%;
            min-height: 100%;
            background: #000;
            color: #ededed;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        ::selection {
            background: #10b981;
            color: #000;
        }

        /* Card styles */
        .confirmation-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(10px);
        }

        /* Status badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            color: #34d399;
            font-size: 14px;
            font-weight: 600;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #34d399;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Countdown timer */
        .countdown-container {
            background: rgba(239, 68, 68, 0.05);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 16px;
            padding: 24px;
        }

        .countdown-time {
            font-size: 42px;
            font-weight: 800;
            color: #fff;
            letter-spacing: -0.02em;
            line-height: 1;
        }

        /* Group members */
        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .member-item:hover {
            background: rgba(255,255,255,0.04);
            border-color: rgba(255,255,255,0.1);
        }

        .member-avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: 700;
            font-size: 14px;
        }

        .member-name {
            color: #d4d4d8;
            font-weight: 500;
        }

        .member-location {
            color: #71717a;
            font-size: 13px;
        }

        /* Info boxes */
        .info-box {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 20px;
        }

        .info-box-title {
            color: #a1a1aa;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 8px;
        }

        .info-box-value {
            color: #fff;
            font-size: 24px;
            font-weight: 700;
        }

        /* CTA button */
        .cta-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 16px 32px;
            background: #10b981;
            color: #000;
            font-weight: 700;
            font-size: 16px;
            border-radius: 14px;
            text-decoration: none;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
        }

        .cta-button:hover {
            background: #34d399;
            transform: translateY(-1px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .confirmation-card {
                padding: 24px 20px;
            }

            .countdown-time {
                font-size: 36px;
            }

            .info-box-value {
                font-size: 20px;
            }
        }
    </style>
</head>
<body class="bg-black">

    <main class="min-h-screen flex items-center justify-center px-4 py-12">
        <div class="w-full max-w-2xl">

            <!-- Header -->
            <div class="text-center mb-8">
                <div class="status-badge mb-6 inline-flex">
                    <span class="status-dot"></span>
                    Następna grupa: <span id="start-date-badge" class="ml-1"></span>
                </div>

                <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight">
                    Zarezerwuj miejsce w grupie
                </h1>

                <p class="text-lg text-zinc-400 max-w-xl mx-auto">
                    Grupa startuje <strong id="start-date" class="text-white font-semibold"></strong>. Zostało <strong id="spots-left" class="text-emerald-400 font-semibold"></strong> miejsc.
                </p>
            </div>

            <!-- Main card -->
            <div class="confirmation-card mb-6">

                <!-- Countdown -->
                <div class="countdown-container mb-8">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-sm font-semibold text-red-400 uppercase tracking-wide">Specjalna cena kończy się za</span>
                    </div>
                    <div class="countdown-time" id="countdown">23:59:59</div>
                    <p class="text-sm text-zinc-400 mt-3">
                        Po tym czasie rezerwacja będzie kosztować 200 zł. Zarezerwuj teraz za 50 zł.
                    </p>
                </div>

                <!-- Group info -->
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="info-box">
                        <div class="info-box-title">Start grupy</div>
                        <div class="info-box-value" id="days-until">-</div>
                    </div>
                    <div class="info-box">
                        <div class="info-box-title">Wolnych miejsc</div>
                        <div class="info-box-value text-emerald-400" id="spots-remaining">-</div>
                    </div>
                </div>

                <!-- Group members -->
                <div class="mb-8">
                    <h3 class="text-sm font-semibold text-zinc-400 uppercase tracking-wide mb-4">
                        Kto już zarezerwował miejsce
                    </h3>
                    <div class="space-y-2" id="group-members">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- What you get -->
                <div class="border-t border-zinc-800 pt-6 mb-8">
                    <h3 class="text-lg font-semibold text-white mb-4">
                        Co dostajesz za rezerwację?
                    </h3>
                    <div class="space-y-3 text-zinc-400 text-sm leading-relaxed">
                        <p>
                            <strong class="text-white">Gwarantowane miejsce w grupie</strong><br>
                            Wpłata 50 zł rezerwuje Twoje miejsce. Grupa jest ograniczona do 6 osób.
                        </p>
                        <p>
                            <strong class="text-white">Szczegóły biznesu w ciągu 24h</strong><br>
                            Otrzymasz ode mnie dokładny plan tego, co dla Ciebie zbuduję i jak będzie wyglądać biznes.
                        </p>
                        <p>
                            <strong class="text-white">Bez ryzyka</strong><br>
                            Jeśli po poznaniu szczegółów zdecydujesz że to nie dla Ciebie — zwrot wpłaty w 100%.
                        </p>
                    </div>
                </div>

                <!-- CTA Button -->
                <a href="#" class="cta-button w-full">
                    Zarezerwuj miejsce za 50 zł
                </a>

                <p class="text-xs text-zinc-500 text-center mt-4">
                    Po kliknięciu przejdziesz do bezpiecznej płatności
                </p>

            </div>

            <!-- Footer CTA -->
            <div class="text-center mt-6">
                <a href="/" class="text-zinc-500 hover:text-white transition-colors text-sm">
                    Wróć na stronę główną
                </a>
            </div>

        </div>
    </main>

    <script>
    (function() {
        // ==================== CONFIGURATION ====================
        const POOL_NAMES = [
            { first: 'Michał', last: 'K.', location: 'Warszawa' },
            { first: 'Anna', last: 'W.', location: 'Kraków' },
            { first: 'Piotr', last: 'N.', location: 'Wrocław' },
            { first: 'Katarzyna', last: 'S.', location: 'Gdańsk' },
            { first: 'Tomasz', last: 'M.', location: 'Poznań' },
            { first: 'Magdalena', last: 'D.', location: 'Łódź' },
            { first: 'Łukasz', last: 'B.', location: 'Szczecin' },
            { first: 'Joanna', last: 'K.', location: 'Lublin' },
            { first: 'Marcin', last: 'P.', location: 'Katowice' },
            { first: 'Aleksandra', last: 'C.', location: 'Bydgoszcz' },
            { first: 'Jakub', last: 'Z.', location: 'Rzeszów' },
            { first: 'Natalia', last: 'L.', location: 'Białystok' }
        ];

        const GROUP_SIZE_MIN = 4;
        const GROUP_SIZE_MAX = 6;
        const MAX_GROUP_SIZE = 6; // Total spots available

        // ==================== INITIALIZE ====================

        // Get or create consistent group
        function getConsistentGroup() {
            let stored = localStorage.getItem('tn_group_members');
            if (stored) {
                return JSON.parse(stored);
            }

            // Generate new consistent group
            const seed = Math.floor(Math.random() * 1000000);
            const groupSize = GROUP_SIZE_MIN + (seed % (GROUP_SIZE_MAX - GROUP_SIZE_MIN + 1));

            // Shuffle with seed for consistency
            const seededRandom = (s) => {
                s = Math.sin(s) * 10000;
                return s - Math.floor(s);
            };

            const shuffled = [...POOL_NAMES];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(seededRandom(seed + i) * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }

            const group = {
                members: shuffled.slice(0, groupSize),
                size: groupSize,
                seed: seed
            };

            localStorage.setItem('tn_group_members', JSON.stringify(group));
            return group;
        }

        // Calculate next group start (always next Monday)
        function getNextGroupStart() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const daysUntilMonday = dayOfWeek === 0 ? 1 : (8 - dayOfWeek);

            const nextMonday = new Date(today);
            nextMonday.setDate(today.getDate() + daysUntilMonday);
            nextMonday.setHours(0, 0, 0, 0);

            return nextMonday;
        }

        // Format date in Polish
        function formatPolishDate(date) {
            const day = date.getDate();
            const months = ['stycznia', 'lutego', 'marca', 'kwietnia', 'maja', 'czerwca',
                          'lipca', 'sierpnia', 'września', 'października', 'listopada', 'grudnia'];
            const month = months[date.getMonth()];
            return `${day} ${month}`;
        }

        // Calculate days until start
        function getDaysUntil(targetDate) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const diff = targetDate - today;
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));

            if (days === 0) return 'dziś';
            if (days === 1) return 'jutro';
            if (days === 2) return 'za 2 dni';
            return `za ${days} dni`;
        }

        // Get initials for avatar
        function getInitials(firstName) {
            return firstName.charAt(0).toUpperCase();
        }

        // Countdown timer (24 hours from page load)
        function startCountdown() {
            const endTime = localStorage.getItem('tn_reservation_end');
            let targetTime;

            if (endTime) {
                targetTime = new Date(parseInt(endTime));
            } else {
                targetTime = new Date();
                targetTime.setHours(targetTime.getHours() + 24);
                localStorage.setItem('tn_reservation_end', targetTime.getTime().toString());
            }

            function updateCountdown() {
                const now = new Date();
                const diff = targetTime - now;

                if (diff <= 0) {
                    document.getElementById('countdown').textContent = '00:00:00';
                    return;
                }

                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                document.getElementById('countdown').textContent =
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }

            updateCountdown();
            setInterval(updateCountdown, 1000);
        }

        // Render group members
        function renderGroupMembers(members) {
            const container = document.getElementById('group-members');
            container.innerHTML = members.map(member => `
                <div class="member-item">
                    <div class="member-avatar">${getInitials(member.first)}</div>
                    <div class="flex-1">
                        <div class="member-name">${member.first} ${member.last}</div>
                        <div class="member-location">${member.location}</div>
                    </div>
                </div>
            `).join('');
        }

        // ==================== MAIN ====================

        const group = getConsistentGroup();
        const nextStart = getNextGroupStart();
        const spotsLeft = MAX_GROUP_SIZE - group.size;

        // Update UI
        document.getElementById('start-date').textContent = formatPolishDate(nextStart);
        document.getElementById('start-date-badge').textContent = formatPolishDate(nextStart);
        document.getElementById('days-until').textContent = getDaysUntil(nextStart);
        document.getElementById('spots-left').textContent = spotsLeft;
        document.getElementById('spots-remaining').textContent = spotsLeft;

        renderGroupMembers(group.members);
        startCountdown();

    })();
    </script>

</body>
</html>
